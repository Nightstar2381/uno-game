<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô UNO</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f0f8ff; }
    .container { max-width: 700px; margin-top: 70px; }
    nav {
      background-color: #ffffffcc;
      box-shadow: 0 1px 5px rgba(0,0,0,0.1);
      backdrop-filter: blur(6px);
    }
    nav a:hover { color: #0d6efd !important; }
  </style>
</head>
<body>

  <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡∏≥‡∏ó‡∏≤‡∏á -->
  <nav class="navbar navbar-expand-lg fixed-top px-3">
    <div class="container-fluid">
      <span class="navbar-brand fw-bold">UNO Game</span>
      <div>
        <a href="index.html" class="nav-link d-inline px-2">üè† ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
        <a href="ranking.html" class="nav-link d-inline px-2 text-primary">üìä ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</a>
        <a href="history.html" class="nav-link d-inline px-2">üßæ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</a>
      </div>
    </div>
  </nav>

  <div class="container">
    <h3 class="text-center mb-4">üìä ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô UNO</h3>

    <!-- Loading -->
    <div class="text-center" id="loading">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>

    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á -->
    <table class="table table-bordered table-striped bg-white d-none" id="ranking-table">
      <thead class="table-dark">
        <tr>
          <th>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</th>
          <th>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</th>
          <th>‡∏ä‡∏ô‡∏∞</th>
          <th>UNO</th>
          <th>‡πÅ‡∏û‡πâ</th>
        </tr>
      </thead>
      <tbody id="ranking-body"></tbody>
    </table>
  </div>

  <script>
    fetch("https://uno-server-vea3.onrender.com/players")
      .then(res => res.json())
      .then(players => {
        const sorted = Object.entries(players).sort((a, b) => b[1].win - a[1].win);
        const tbody = document.getElementById("ranking-body");
        sorted.forEach(([name, stats], i) => {
          tbody.innerHTML += `
            <tr>
              <td>${i + 1}</td>
              <td>${name}</td>
              <td>${stats.win || 0}</td>
              <td>${stats.uno || 0}</td>
              <td>${stats.lose || 0}</td>
            </tr>`;
        });

        // ‡∏ã‡πà‡∏≠‡∏ô loading ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        document.getElementById("loading").style.display = "none";
        document.getElementById("ranking-table").classList.remove("d-none");
      });
  </script>
</body>
</html>
